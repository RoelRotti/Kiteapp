<?php
function red_if_zero($value) {
	return sprintf($value > 0 ? '%d' : '<strong>%d</strong>', $value);
}
?>
<!DOCTYPE html>
<html>
	<head>
		<title>Analyse <?=$this->html($_GET['kb'])?></title>
		<style>
			body {
				font: 14px/24px "Lucida Grande", Lucida, Verdana, sans-serif;
			}
			th {
				text-align: left;
			}
			td:nth-child(1) {
				width: 200px;
			}

			td strong {
				color: red;
			}

			h3 {
				border-top: 1px solid silver;
				padding: 1em 0;
			}

		</style>
	</head>
	<body>
		<dl class="stats">
			<dt>Aantal regels</dt>
			<dd><?=$numberOfRules?></dd>
			
			<dt>Aantal vragen</dt>
			<dd><?=$numberOfQuestions?></dd>
		</dl>
		<?php foreach ($stats as $fact): ?>
		<h3><?=$this->html($fact->name)?></h3>
		<table>
			<thead>
				<tr>
					<th>Waarde</th>
					<th>Afleidende vragen</th>
					<th>Afleindende regels</th>
					<th>Afleidende regels + vragen</th>
					<th>Testende regels</th>
				</tr>
			</thead>
			<tbody>
			<?php foreach ($fact->values as $value => $value_stats): ?>
				<tr>
					<td><?=$this->html($value)?></td>
					<td><?=count($value_stats->inferringQuestions)?></td>
					<td><?=count($value_stats->inferringRules)?></td>
					<td><?=red_if_zero(count($value_stats->inferringQuestions) + count($value_stats->inferringRules))?></strong></td>
					<td><?=red_if_zero(count($value_stats->dependingRules))?></td>
				</tr>
			<?php endforeach ?>
			</tbody>
		</table>
		<?php endforeach ?>
	</body>
</html>